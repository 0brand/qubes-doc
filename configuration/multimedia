---
layout: doc
title: How to play multimedia content
permalink: /doc/config/multimedia/
---

This short howto will explain how you can use Spotify, Netflix or Amazon Prime under Qubes OS.
This steps have been tested by providing an own "multimedia" App VM which is based on the Qubes OS Debian 8 Template VM.

Listen to Spotify
=================
Install-Howto: https://www.spotify.com/de/download/linux/

Detailed steps which must be run in the Debian 8 template VM.
A good idea might be to clone the existing Debian 8 template and create an own debian-8-multimedia template from whoch you can then create an App-VM.
You need to make sure that you allow networking to the internet during installation, as you need to download some data which are not from the default repositories.

# Become root
su -
# Download the Key which is used for signing the Spotify package repository
apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys BBEBDCB318AD50EC6865090613B00F1FD2C19886
#Public-Key: http://keyserver.ubuntu.com/pks/lookup?op=vindex&search=0xD2C19886&fingerprint=on
#Fingerprint: BBEB DCB3 18AD 50EC 6865 0906 13B0 0F1F D2C1 9886
# Add the package repository to your list of package sources
echo deb http://repository.spotify.com stable non-free | tee /etc/apt/sources.list.d/spotify.list
# Make the new repository known to your system
apt-get update
# Install the Spotify Client
apt-get install -y spotify-client



Play Netflix
============
You can play Netflix by installing a more recent version of firefox or by installing Google Chroome.
As Google Chrome will play video from Netflx and (!) Amazon, the suggestion is to install Google Chrome.
If you don't use Amazon Prime, Firefox will work.

Install Firefox
---------------
The built in Firefox (from the Debian Template VM) was Firefox ESR 45.3.0
According to the "supported browser" list Mozilla Firefox >= 47.x is needed.
I've thereoff installed Firefox v53.0.2 according to this manual:
http://libre-software.net/how-to-install-firefox-on-ubuntu-linux-mint/

1) download firefox from https://www.mozilla.org/en-US/firefox/new/?scene=2
direct download link:
https://download-installer.cdn.mozilla.net/pub/firefox/releases/53.0.2/linux-x86_64/en-US/firefox-53.0.2.tar.bz2

2) unpack the downloaded file
tar -xjf firefox-53.0.2.tar.bz2

3) move the unpacked folder:
sudo mv firefox /opt/firefox53

4) Create a symlink to the new firefox version:
if you want to use the new installed firefox as "standard firefox", rename the original link in case you want to go back to the previous version
sudo mv /usr/bin/firefox /usr/bin/firefox-old
Create a link to the new firefox version
sudo ln -s /opt/firefox53/firefox /usr/bin/firefox

5) Launch firefox and open Preferences, Content and enable "Play DRM content"
That's it, login into Netflix and enjoy.


How to use Amazon Prime
=======================
Playing Video thorugh Amazon Prime via Firefox didn't work, with Google Chrome it works.
Warning: You need to install Google Chrome, not Chromium.

Install Google Chrome
---------------------
Launch you Debian 8 Template VM

1) Download latest .deb-package of Google Chrome
   wget -c wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb

2) Install the package
   sudo dpkg -i google-chrome-*.deb

3) Install missing dependencies
   sudo apt-get install -f

4) Shutdown Template VM

5) Add Google Chrome Shortcut to your multimedia App VM



Play DVDs
=========

To play DVDs within Qubes I have used my new multimedia App VM (which can also play Spotify and Netflix, see post from yesterday).
The multimedia App-VM is based on the Debian 8 Template in Qubes 3.2

Some suggested to install the whole desktop within the Debian Image, I don't want to install everything but only the stuff, that is really needed.
As such I have looked at the Debian documentation

1) Launch Debian 8 Template VM and install the Qubes Proxy Tools, so that you can pass your (external?) DVD-Drive via sys-usb to the multimedia App-VM. Strangely the qubes-usb-proxy seems to be installed within the fedora template but not in the debian template.
   In Debian Template VM:
   sudo apt-get install qubes-usb-proxy

2) Install libdbdread4 from the default repositories:
   In Debian Template VM:
   apt-get install libdvdread4
   
3) Install libdvdcss for the decryption of CSS protected-DVDs.
   Because of license restrictions in various countries this can't be done from the Debian repositories but needs to be installed manually.
   (not that hard :-)).
   Download the packaged .deb from: http://www.deb-multimedia.org/dists/stable/main/binary-amd64/package/libdvdcss2
   In Debian Template VM:
   wget http://www.deb-multimedia.org/pool/main/libd/libdvdcss/libdvdcss2_1.3.0-dmo1_amd64.deb
   sudo dpkg -i libdvdcss2_1.3.0-dmo1_amd64.deb

4) I like to use VLC to playback Video/DVDs - you might want to use another player, but VLC works fine.
   As this is not installed in the default Debian Template:
   In Debian Template VM:
   sudo apt-get install vlc
   This will also install some dependencies.

5) Shutdown the Debian Template VM and launch your multimedia App VM

6) Plugin your external USB DVD-Drive (if you don't have an internal drive) and pass it to the multimedia App VM
   In dom0:
   qvm-usb -a multimedia sys-usb:3-6

7) Launch VLC
   qvm-run multimedia vlc
   Warning: a window will open in the background which will ask for collecting metadata information.
   I haven't seen the window as it was covered by the VLC main window, so that I couldn't launch any commands in this window.

8) Open DVD within VLC:
   Media > Open Disk
   You can leave the defaults (/dev/sr0) and just hit play

Enjoy your DVD
